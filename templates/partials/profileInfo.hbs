<div class="user-information-container">
  <form action="/update-profileinfo?id={{user.id}}" method="POST">

      <div class="user-information-header">
        <h2 class="title">Profile</h2>
        <div class="lastbuttons">
          <input class="update-button" type="submit" value="Update">
          {{#if superadmin}}
          <a href="/delete-user/?id={{user.id}}" class="delete-button">Delete</a>
          {{/if}}
        </div>
      </div>


    <div class="user-information-grid">
      <div class="user-information-field">
        <label>Member ID:</label>
        <span class="non-editable">{{user.memberId}}</span>
      </div>

      <div class="user-information-field">
        <label>Name:</label>
        <div class="input-wrapper">
          <input class="editable" type="text" name="name" value="{{user.name}}" readonly>
          <span class="edit-icon">&#9998;</span>
        </div>
      </div>

      <div class="user-information-field">
        <label>Mobile:</label>
        <div class="input-wrapper">
          <input class="editable" type="text" name="mobile" value="{{user.mobile}}" readonly>
          <span class="edit-icon">&#9998;</span>
        </div>
      </div>

      <div class="user-information-field">
        <label>Email:</label>
        <div class="input-wrapper">
          <input class="editable" type="text" name="email" value="{{user.email}}" readonly>
          <span class="edit-icon">&#9998;</span>
        </div>
      </div>

      <div class="user-information-field">
        <label>Date of Birth:</label>
        <div class="input-wrapper">
          <input class="editable" type="text" name="dob" value="{{mmddyyyy}}" readonly>
          <span class="edit-icon">&#9998;</span>
        </div>
      </div>

      <div class="user-information-field">
        <label>Preferred Language:</label>
        <div class="input-wrapper">
          <input class="editable" type="text" name="lang" value="{{user.language}}" readonly>
          <span class="edit-icon">&#9998;</span>
        </div>
      </div>

      <div class="user-information-field">
        <label>Updated Date:</label>
        <span class="non-editable">{{makeDate user.updatedAt}}</span>
      </div>

      <div class="user-information-field">
        <label>Anniversary Date:</label>
        <span class="non-editable">{{makeDate user.createdAt}}</span>
      </div>

      <div class="user-information-field">
        <label>Tier:</label>
        <span class="non-editable">{{user.tier}}</span>
      </div>

      {{#if refUser.memberId}}
      <div class="user-information-field">
        <label>Referred By:</label>
        <span class="non-editable">
          <a href="/profile-info?id={{refUser.id}}">{{refUser.memberId}}</a>
        </span>
      </div>
      {{/if}}
  </form>
</div>

<script>
  document.querySelectorAll('.user-information-field').forEach(field => {
    const inputField = field.querySelector('.editable');
    const editIcon = field.querySelector('.edit-icon');

    if (inputField && editIcon) {
        editIcon.addEventListener('click', function() {
            inputField.removeAttribute('readonly'); // Make the input editable
            inputField.focus(); // Set focus to the input field

            const end = inputField.value.length;
            inputField.setSelectionRange(end, end);
        });

        inputField.addEventListener('focus', function() {
            editIcon.style.visibility = 'hidden'; // Hide the icon when input is focused
        });

        inputField.addEventListener('blur', function() {
            editIcon.style.visibility = 'visible'; // Show the icon when input loses focus
        });
    }
  });
</script>

